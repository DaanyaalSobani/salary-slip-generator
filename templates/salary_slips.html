{% extends "base.html" %}

{% block content %}
    <div class="no-print" style="background: #e9f7fe; padding: 10px; margin-bottom: 20px; border-left: 3px solid #2196F3;">
        <h3 style="margin-top: 0;">Print Instructions:</h3>
        <p>To print these salary slips:</p>
        <ol>
            <li>Press <strong>Ctrl+P</strong> (or Cmd+P on Mac)</li>
            <li>Select your printer</li>
            <li>Each salary slip will print on a separate page</li>
        </ol>
    </div>

    {% for employee in employees %}
    <div class="salary-slip">
        <div class="header">
            <h1>SALARY SLIP</h1>
            <h2>For the month of {{ month_year }}</h2>
        </div>
        
        <div class="employee-details">
            <div class="employee-info">
                <h3>Employee Details</h3>
                <p><strong>Name:</strong> {{ employee.Name }}</p>
                <p><strong>Position:</strong> {{ employee.Position }}</p>
                <p><strong>Days Worked:</strong> {{ employee.Days_Worked|default(0) }}</p>
            </div>
            <div class="payment-info">
                <h3>Payment Details</h3>
                <p><strong>Payment Method:</strong> {{ employee.Method|default('N/A') }}</p>
                <p><strong>Account:</strong> {{ employee.Account|default('N/A') }}</p>
                <p><strong>Currency:</strong> {{ employee.Currency|default('PKR') }}</p>
            </div>
        </div>
        
        <table class="salary-details">
            <thead>
                <tr>
                    <th>Description</th>
                    <th>Amount ({{ employee.Currency|default('PKR') }})</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Basic Salary</td>
                    <td>{{ employee.Salary|format_currency(employee.Currency) }}</td>
                </tr>
                <tr>
                    <td>Deductions</td>
                    <td>{{ employee.Deductions|format_currency(employee.Currency) }}</td>
                </tr>
                <tr>
                    <td><strong>Net Salary</strong></td>
                    <td><strong>{{ employee.Net_Pay|format_currency(employee.Currency) }}</strong></td>
                </tr>
            </tbody>
        </table>

        {% if employee.has_deductions or employee.Previous_Loan_Balance %}
        <div class="deduction-details">
            <h3>Loan/Advance Details</h3>
            {% if employee.Previous_Loan_Balance %}
            <p><strong>Previous Loan Balance:</strong> {{ employee.Previous_Loan_Balance|format_currency(employee.Currency) }} {{ employee.Currency|default('PKR') }}</p>
            <p><strong>Current Loan Balance:</strong> {{ employee.Current_Loan_Balance|format_currency(employee.Currency) }} {{ employee.Currency|default('PKR') }}</p>
            {% endif %}
            {% if employee.Comment %}
            <p><strong>Note:</strong> {{ employee.Comment }}</p>
            {% endif %}
        </div>
        {% endif %}

        <div class="signature">
            <div>
                <p class="signature-line">Employee Signature</p>
            </div>
            <div>
                <p class="signature-line">Employer Signature</p>
            </div>
        </div>
    </div>
    {% endfor %}
{% endblock %} 